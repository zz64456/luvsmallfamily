{% extends 'auth/base_auth.html' %}
{% load static %}

{% block title %}ç™¼å¸ƒæ–°æ–‡ç«  - æœæ—¥è¨ˆç•«{% endblock %}
{% block subtitle %}åˆ†äº«æ‚¨çš„æ„›å¿ƒæ•…äº‹ï¼Œå¹«åŠ©æ›´å¤šæµæµªå‹•ç‰©{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'blog/css/post_create.css' %}">
<style>
    /* è¦†è“‹åŸºç¤æ¨¡æ¿çš„å®¹å™¨å¯¬åº¦ */
    .auth-container {
        max-width: 800px !important;
    }
</style>
{% endblock %}

{% block content %}
<div class="header">
    <h1>ğŸ“ ç™¼å¸ƒæ–°æ–‡ç« </h1>
    <p>åˆ†äº«æ‚¨çš„æ„›å¿ƒæ•…äº‹ï¼Œå¹«åŠ©æ›´å¤šæµæµªå‹•ç‰©æ‰¾åˆ°æº«æš–çš„å®¶</p>
</div>

<form method="post" enctype="multipart/form-data" id="post-form">
    {% csrf_token %}
    
    {% if form.non_field_errors %}
        <div class="form-errors">
            {{ form.non_field_errors }}
        </div>
    {% endif %}
    
    <!-- æ¨™é¡Œæ¬„ä½ -->
    <div class="form-group">
        <label class="form-label" for="{{ form.title.id_for_label }}">
            ğŸ“ {{ form.title.label }}
        </label>
        {{ form.title }}
        {% if form.title.errors %}
            <div class="form-errors">{{ form.title.errors }}</div>
        {% endif %}
    </div>
    
    <!-- å…§å®¹æ¬„ä½ -->
    <div class="form-group">
        <label class="form-label" for="{{ form.text.id_for_label }}">
            ğŸ’­ {{ form.text.label }}
        </label>
        {{ form.text }}
        {% if form.text.errors %}
            <div class="form-errors">{{ form.text.errors }}</div>
        {% endif %}
    </div>
    
    <!-- åª’é«”ä¸Šå‚³å€åŸŸ -->
    <div class="upload-section">
        <h3>ğŸ“· æ·»åŠ åª’é«”æª”æ¡ˆï¼ˆé¸å¡«ï¼‰</h3>
        
        <!-- åœ–ç‰‡ä¸Šå‚³ -->
        <div class="form-group">
            <label class="form-label">ğŸ–¼ï¸ ä¸Šå‚³åœ–ç‰‡</label>
            {{ form.images }}
            <button type="button" class="file-upload-btn" onclick="document.getElementById('{{ form.images.id_for_label }}').click()">
                ğŸ“¸ é¸æ“‡åœ–ç‰‡
            </button>
            <div class="help-text">æ”¯æ´ JPG, PNG, GIF æ ¼å¼ï¼Œæœ€å¤§ 10MB</div>
            {% if form.images.errors %}
                <div class="form-errors">{{ form.images.errors }}</div>
            {% endif %}
            
            <!-- åœ–ç‰‡é è¦½ç¶²æ ¼ -->
            <div id="image-preview-grid" class="preview-grid"></div>
        </div>
        
        <!-- å½±ç‰‡ä¸Šå‚³ -->
        <div class="form-group">
            <label class="form-label">ğŸ¬ ä¸Šå‚³å½±ç‰‡</label>
            {{ form.video }}
            <button type="button" class="file-upload-btn" onclick="document.getElementById('{{ form.video.id_for_label }}').click()">
                ğŸ¥ é¸æ“‡å½±ç‰‡
            </button>
            <div class="help-text">æ”¯æ´ MP4, AVI, MOV æ ¼å¼ï¼Œæœ€å¤§ 50MB</div>
            {% if form.video.errors %}
                <div class="form-errors">{{ form.video.errors }}</div>
            {% endif %}
            
            <!-- å½±ç‰‡é è¦½ -->
            <div id="video-preview-grid" class="preview-grid"></div>
        </div>
        
        <p class="help-text" style="text-align: center; margin-top: 20px;">
            ğŸ’¡ æç¤ºï¼šæ‚¨å¯ä»¥åŒæ™‚ä¸Šå‚³åœ–ç‰‡å’Œå½±ç‰‡ä¾†è±å¯Œæ‚¨çš„æ–‡ç« å…§å®¹
        </p>
    </div>
    
    <!-- æäº¤æŒ‰éˆ• -->
    <div class="button-group">
        <button type="submit" class="btn-primary">
            ğŸš€ ç™¼å¸ƒæ–‡ç« 
        </button>
        <a href="{% url 'auth:profile' %}" class="btn-secondary">
            âŒ å–æ¶ˆ
        </a>
    </div>
</form>

<div class="auth-links">
    <a href="{% url 'blog:blog_list' %}">â† è¿”å›é¦–é </a>
    <span style="margin: 0 15px;">|</span>
    <a href="{% url 'auth:profile' %}">å€‹äººè³‡æ–™</a>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'blog/js/post_create.js' %}"></script>
{% endblock %}
